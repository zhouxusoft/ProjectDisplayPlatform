<script setup>
import { ref } from 'vue'
import ProjectItem from '../components/ProjectItem.vue'
import LeftNavItem from '../components/LeftNavItem.vue'
const projects = ref([
	{
		id: 1,
		name: "RainManGO/vue3-composition-admin",
		main: "🎉 基于vue3 的管理端模板(Vue3 TS Vuex4 element-plus vue-i18n-next composition-api) vue3-admin vue3-ts-admin",
		tags: ["JavaScript", "Flask", "Vue", "BootStrap"],
		language: ["449633", "Vue"],
		starnum: 99586,
		updatetime: "2022/8/19"
	},
	{
		id: 2,
		name: "jeecgboot/jeecgboot-vue3",
		main: "🔥 JeecgBoot—Vue3版前端源码，采用 Vue3.0+TypeScript+Vite+Ant-Design-Vue等新技术方案，包括二次封装组件、utils、hooks、动态菜单、权限校验、按钮级别权限控制等功能。 是JeecgBoot低代码平台的vue3技术栈的全…",
		tags: ["JavaScript", "Vue", "BootStrap"],
		language: ["481828", "JavaScript"],
		starnum: 758,
		updatetime: "2022/8/19"
	},
	{
		id: 3,
		name: "Godxu电商平台",
		main: "Nodejs",
		tags: ["Flask", "Vue", "BootStrap", "JavaScript", "Flask", "BootStrap", "JavaScript", "Flask", "BootStrap"],
		language: ["995333", "Vue"],
		starnum: 10000,
		updatetime: "2022/8/19"
	}
])
const kinds = ref([
	{
		id: 1,
		name: "Projects",
		icon: "&#xf828",
		isactive: true
	},
	{
		id: 2,
		name: "Users",
		icon: "&#xf500",
		isactive: false
	}
])
const languages = ref(
	["449633", "Java"],
	["995333", "HTML"],
	["481828", "JavaScript"],
	["465999", "Vue"],
	["666666", "Python"]
)
for (let i = 0; i < projects.value.length; i++) {
	if (projects.value[i].starnum >= 1000) {
		projects.value[i].starnum = Math.floor(projects.value[i].starnum / 100)
		projects.value[i].starnum = projects.value[i].starnum / 10
		projects.value[i].starnum = projects.value[i].starnum + "k"
	}
}
const clickbtn = () => {
	projects.value.push({
		id: projects.value.length + 1,
		name: "Godxu字体库Godxu字体库Godxu字体库",
		main: "Flask",
		tags: ["JavaScript", "Flask", "BootStrap"],
		language: ["449633", "Vue"],
		starnum: "9.7k",
		updatetime: "2022/8/19"
	})
}
const chooseLeftNav = (kind) => {
	if (!kind.isactive) {
		for (let i = 0; i < kinds.value.length; i++) {
			kinds.value[i].isactive = false
		}
		kind.isactive = true
	}
}
</script>

<template>
	<div class="borderbox">
		<div class="leftnav d-none d-md-block">
			<div class="leftnavborder">
				<div class="filter">Filter by</div>
				<div class="kindgroupbox p-2">
					<LeftNavItem v-for="kind in kinds" :key="kind.id" :kind="kind" @click="chooseLeftNav(kind)" />
				</div>
				<div class="fengeline"></div>
				<div class="languagetitle">Lagnuages</div>
				<div class="languagegroupbox p-2">
					<div v-for="language in languages" :key="language.id" class="languageitembox">
						<div class="languageitemicon" :style="{ backgroundColor: '#' + language[0] }"></div>
						<div class="languageitemname">{{ language[1] }}</div>
					</div>
				</div>
			</div>
		</div>
		<div class="straightline"></div>
		<div class="mainprojects px-4 py-3">
			<ProjectItem v-for="project in projects" :key="project.id" :project="project" />
			<button class="btn btn-success" @click="clickbtn()">add</button>
		</div>
		<div class="rightnav d-none d-lg-block p-2">
			这是 内容
		</div>
	</div>
</template>

<style scoped>
.borderbox {
	display: flex;
	justify-content: space-between;
}

.straightline {
	width: 1px;
	background-color: #666666;
}

.leftnav {
	position: sticky;
	height: 100vh;
	top: 0;
	width: 270px;
}

.mainprojects {
	flex: 1;
	display: grid;
	gap: 16px;
	min-width: 0px;
	grid-template-columns: 1fr;
	height: fit-content;
}

.rightnav {
	width: 270px;
}

.filter {
	font-size: 16px;
	font-weight: 500;
	padding: 16px 16px 8px;
	color: #000000;
}

.fengeline {
	height: 1px;
    background-color: rgb(136, 146, 157);
    margin: 8px 16px;
}

.languagetitle {
	color: #0E1116;
	padding: 8px 20px;
	font-size: 12px;
}

.languageitembox {
	display: flex;
	white-space: nowrap;
	align-items: center;
	padding: 6px 8px;
    margin: 0 8px;
	border-radius: 6px;
    color: #0E1116;
    cursor: pointer;
}

.languageitemicon {
	border-radius: 8px;
    border-style: solid;
    border-width: 1px;
    border-color: rgba(1, 4, 9, 0.1);
    width: 10px;
    height: 10px;
	margin: 5px;
}

.languageitemname {
	font-size: 14px;
	height: 20px;
	margin: 0 6px;
}

.languageitembox:hover {
    background-color: rgb(231, 236, 240);
}
</style>